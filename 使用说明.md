# 语音输入助手 - 使用说明

## 功能概述

本语音输入助手基于OpenAI Whisper模型，提供高精度的中文语音识别功能，支持**连续语音识别模式**和**大模型文本优化**。

## 主要功能

### 1. 连续语音识别 ⭐
- 按 `F9` 键启动/停止连续识别模式
- 自动检测语音活动，无需手动触发
- 检测到语音时自动录音2.5秒并识别
- 识别结果直接输入到当前光标位置

### 2. 快速识别
- 使用 `tiny` 模型，识别速度快（约2-3秒）
- 支持 `medium` 模型，识别准确率更高（约4-5秒）
- 模型文件本地缓存，无需重复下载

### 3. 大模型优化（可选）
- 支持OpenAI GPT模型优化识别结果
- 自动纠错、添加标点、规范表达
- 需要配置OpenAI API密钥

## 快速开始

### 1. 启动程序
```bash
python src/main.py
```

### 2. 基本操作
- **F9**: 切换连续识别模式
- **Ctrl+F12**: 退出程序
- 系统托盘图标显示运行状态

### 3. 连续识别模式
1. 按 `F9` 启动连续识别
2. 正常说话，系统会自动检测语音
3. 检测到语音时自动录音2.5秒
4. 识别结果自动输入到当前位置
5. 再次按 `F9` 停止连续识别

## 配置说明

### 模型选择
- **tiny**: 最快速度，适合实时对话
- **base**: 平衡速度和准确率  
- **small**: 较高准确率，速度适中
- **medium**: 高准确率，速度较慢
- **large**: 最高准确率，速度最慢

### 语音活动检测
- `vad_threshold`: 语音检测阈值（0.005-0.05）
- 数值越小越敏感，但可能误触发
- 建议值：0.020

### 录音参数
- `auto_recording_duration`: 自动录音时长（1-10秒）
- 建议值：2.5秒，足够识别一句话

## 性能优化

### 1. 解决延迟问题
- ✅ 使用连续识别模式，无需等待手动触发
- ✅ 录音时长缩短至2.5秒
- ✅ 使用tiny模型提高识别速度
- ✅ 模型本地缓存，避免重复下载

### 2. 解决识别不全问题
- ✅ 连续监听模式，语音活动自动触发
- ✅ 优化语音活动检测阈值
- ✅ 防止录音重叠，确保完整识别

### 3. 识别准确率
- 使用medium模型可获得更高准确率
- 启用大模型优化可进一步提升效果
- 确保麦克风音量适中，避免过大或过小

## 故障排除

### 1. 无法识别语音
- 检查麦克风是否正常工作
- 调整语音活动检测阈值
- 确保录音音量适中

### 2. 识别延迟
- 使用tiny模型提高速度
- 确保CPU性能充足
- 关闭不必要的后台程序

### 3. 识别不准确
- 使用medium或large模型
- 启用大模型优化功能
- 说话清晰，避免背景噪音

## 热键说明

| 热键 | 功能 |
|------|------|
| F9 | 切换连续识别模式 |
| Ctrl+F12 | 退出程序 |

## 日志查看

程序运行日志保存在 `logs/` 目录：
- `voice_assistant.log`: 主程序日志
- 包含识别结果、错误信息等

## 更新历史

### v2.0 (最新)
- ✅ 实现连续语音识别模式
- ✅ 优化识别速度和延迟
- ✅ 修复启动时丢失前几个词的问题
- ✅ 使用本地模型缓存
- ✅ 改进用户体验和界面提示

### v1.0
- 基础语音识别功能
- 手动触发录音识别
- 支持多种Whisper模型 